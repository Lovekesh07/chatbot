<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Amazon Chatbot</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <h2>Amazon Chatbot</h2>
        </div>

        <div class="chat-box" id="chat-box">
            <!-- Messages will appear here -->
        </div>

        <form id="chat-form" class="chat-input" onsubmit="return sendMessage();">
            <input type="text" id="user-input" placeholder="Ask me something..." autocomplete="off" />
            <button type="submit">Send</button>
        </form>
    </div>

    <script>
        function sendMessage() {
            var userInput = document.getElementById("user-input").value;
            if (!userInput.trim()) return false;

            var chatBox = document.getElementById("chat-box");

            // Add user message
            var userMessage = document.createElement("div");
            userMessage.className = "user-message";
            userMessage.innerText = userInput;
            chatBox.appendChild(userMessage);

            // Scroll to bottom
            chatBox.scrollTop = chatBox.scrollHeight;

            // Send request to backend
            fetch('/get?msg=' + encodeURIComponent(userInput))
                .then(response => response.text())
                .then(data => {
                    var botMessage = document.createElement("div");
                    botMessage.className = "bot-message";
                    botMessage.innerText = data;
                    chatBox.appendChild(botMessage);
                    chatBox.scrollTop = chatBox.scrollHeight;
                });

            document.getElementById("user-input").value = "";
            return false;
        }
    </script>
</body>
</html>
